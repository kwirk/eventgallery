<project>

	<property name="version" value="2.2.1"/>
	<property name="componentname" value="com_eventgallery"/>
	<property name="source.dir" value="../../../../"/>
	<property name="target.dir" value="e:/temp/com_eventgallery"/>
	
	<property name="target.tmp.dir" value="${target.dir}/tmp/"/>
	<property name="target.administrator.dir" value="${target.tmp.dir}/administrator/components"/>
	<property name="target.components.dir" value="${target.tmp.dir}/components"/>
	<property name="target.admin.dir" value="${target.tmp.dir}/admin"/>
	
	<target name="_clean">
	    <!-- remove the tmp folder -->
    	<delete dir="${target.tmp.dir}"/>
	</target>
	
	<target name="_createTargetFolders">
	    <!-- create the necessary folders -->
    	<mkdir dir="${target.tmp.dir}"/>
		<mkdir dir="${target.administrator.dir}"/>
		<mkdir dir="${target.components.dir}"/>
		<mkdir dir="${target.admin.dir}"/>
	</target>	
	
    <target name="copy" depends="_clean, _createTargetFolders">
		<!-- copy root files -->
		 <copy todir="${target.administrator.dir}/${componentname}" overwrite="true" verbose="${verbose}" failonerror="false">
                       <fileset dir="${source.dir}/administrator/components/${componentname}"/>
         </copy>
         
         <copy file="${source.dir}/administrator/components/${componentname}/${componentname}.xml" tofile="${target.tmp.dir}/${componentname}.xml"/>
         <copy file="${source.dir}/administrator/components/${componentname}/script.php" tofile="${target.tmp.dir}/script.php"/>
          
         <copy todir="${target.admin.dir}/language" overwrite="true" verbose="${verbose}" failonerror="false">
                       <fileset dir="${source.dir}/administrator/components/${componentname}/language"/>
         </copy>
         <copy todir="${target.admin.dir}/sql" overwrite="true" verbose="${verbose}" failonerror="false">
                       <fileset dir="${source.dir}/administrator/components/${componentname}/sql"/>
         </copy>
         <copy todir="${target.components.dir}/${componentname}" overwrite="true" verbose="${verbose}" failonerror="false">
                       <fileset dir="${source.dir}/components/${componentname}"/>
         </copy>
		
	
		
    </target>

	<target name="build" depends="copy">
	
		<!-- create final zip -->
		<zip destfile="${target.dir}/com_eventgallery_${version}.zip"
       		basedir="${target.tmp.dir}"
  		/>
	
	</target>
</project>